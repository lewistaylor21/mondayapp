/*! For license information please see board_view.bundle.js.LICENSE.txt */
(()=>{"use strict";var n,e={3827:(n,e,t)=>{var r=t(6540),a=t(5338),o=t(7813),i=t.n(o),l=t(5072),c=t.n(l),s=t(7825),u=t.n(s),d=t(7659),m=t.n(d),p=t(5056),f=t.n(p),g=t(540),b=t.n(g),h=t(1113),y=t.n(h),v=t(8868),x={};function E(){var n,e,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",a=t.toStringTag||"@@toStringTag";function o(t,r,a,o){var c=r&&r.prototype instanceof l?r:l,s=Object.create(c.prototype);return w(s,"_invoke",function(t,r,a){var o,l,c,s=0,u=a||[],d=!1,m={p:0,n:0,v:n,a:p,f:p.bind(n,4),d:function(e,t){return o=e,l=0,c=n,m.n=t,i}};function p(t,r){for(l=t,c=r,e=0;!d&&s&&!a&&e<u.length;e++){var a,o=u[e],p=m.p,f=o[2];t>3?(a=f===r)&&(c=o[(l=o[4])?5:(l=3,3)],o[4]=o[5]=n):o[0]<=p&&((a=t<2&&p<o[1])?(l=0,m.v=r,m.n=o[1]):p<f&&(a=t<3||o[0]>r||r>f)&&(o[4]=t,o[5]=r,m.n=f,l=0))}if(a||t>1)return i;throw d=!0,r}return function(a,u,f){if(s>1)throw TypeError("Generator is already running");for(d&&1===u&&p(u,f),l=u,c=f;(e=l<2?n:c)||!d;){o||(l?l<3?(l>1&&(m.n=-1),p(l,c)):m.n=c:m.v=c);try{if(s=2,o){if(l||(a="next"),e=o[a]){if(!(e=e.call(o,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,l<2&&(l=0)}else 1===l&&(e=o.return)&&e.call(o),l<2&&(c=TypeError("The iterator does not provide a '"+a+"' method"),l=1);o=n}else if((e=(d=m.n<0)?c:t.call(r,m))!==i)break}catch(e){o=n,l=1,c=e}finally{s=1}}return{value:e,done:d}}}(t,a,o),!0),s}var i={};function l(){}function c(){}function s(){}e=Object.getPrototypeOf;var u=[][r]?e(e([][r]())):(w(e={},r,function(){return this}),e),d=s.prototype=l.prototype=Object.create(u);function m(n){return Object.setPrototypeOf?Object.setPrototypeOf(n,s):(n.__proto__=s,w(n,a,"GeneratorFunction")),n.prototype=Object.create(d),n}return c.prototype=s,w(d,"constructor",s),w(s,"constructor",c),c.displayName="GeneratorFunction",w(s,a,"GeneratorFunction"),w(d),w(d,a,"Generator"),w(d,r,function(){return this}),w(d,"toString",function(){return"[object Generator]"}),(E=function(){return{w:o,m}})()}function w(n,e,t,r){var a=Object.defineProperty;try{a({},"",{})}catch(n){a=0}w=function(n,e,t,r){function o(e,t){w(n,e,function(n){return this._invoke(e,t,n)})}e?a?a(n,e,{value:t,enumerable:!r,configurable:!r,writable:!r}):n[e]=t:(o("next",0),o("throw",1),o("return",2))},w(n,e,t,r)}function S(n,e,t,r,a,o,i){try{var l=n[o](i),c=l.value}catch(n){return void t(n)}l.done?e(c):Promise.resolve(c).then(r,a)}function k(n){return function(){var e=this,t=arguments;return new Promise(function(r,a){var o=n.apply(e,t);function i(n){S(o,r,a,i,l,"next",n)}function l(n){S(o,r,a,i,l,"throw",n)}i(void 0)})}}function O(n,e){return function(n){if(Array.isArray(n))return n}(n)||function(n,e){var t=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=t){var r,a,o,i,l=[],c=!0,s=!1;try{if(o=(t=t.call(n)).next,0===e){if(Object(t)!==t)return;c=!1}else for(;!(c=(r=o.call(t)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(n){s=!0,a=n}finally{try{if(!c&&null!=t.return&&(i=t.return(),Object(i)!==i))return}finally{if(s)throw a}}return l}}(n,e)||function(n,e){if(n){if("string"==typeof n)return M(n,e);var t={}.toString.call(n).slice(8,-1);return"Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t?Array.from(n):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?M(n,e):void 0}}(n,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}x.styleTagTransform=y(),x.setAttributes=f(),x.insert=m().bind(null,"head"),x.domAPI=u(),x.insertStyleElement=b(),c()(v.A,x),v.A&&v.A.locals&&v.A.locals;var C=i()();const B=function(){var n=O((0,r.useState)(null),2),e=(n[0],n[1]),t=O((0,r.useState)(null),2),a=t[0],o=t[1],i=O((0,r.useState)([]),2),l=i[0],c=i[1],s=O((0,r.useState)(!1),2),u=s[0],d=s[1],m=O((0,r.useState)(""),2),p=m[0],f=m[1],g=O((0,r.useState)("info"),2),b=g[0],h=g[1],y=O((0,r.useState)(!1),2),v=y[0],x=y[1],w=O((0,r.useState)("Initializing..."),2),S=w[0],M=w[1];(0,r.useEffect)(function(){B()},[]);var B=function(){try{M("Initializing Monday.com SDK..."),C.init(),C.listen("context",function(n){console.log("Monday.com context received:",n.data),e(n.data),o(n.data.boardId),x(!0),M("Connected to Monday.com"),n.data.boardId&&j(n.data.boardId)}),C.listen("auth",function(n){console.log("Monday.com auth received:",n.data),x(!0),M("Authenticated with Monday.com")}),D("Monday.com SDK initialized successfully!","success");var n=function(){var n=document.body.scrollHeight;C.execute("setHeight",{height:n})};new ResizeObserver(n).observe(document.body),setTimeout(n,100)}catch(n){console.error("Error initializing Monday.com SDK:",n),M("SDK Error: "+n.message),D("Error initializing Monday.com SDK: "+n.message,"error"),N()}},j=function(){var n=k(E().m(function n(e){var t,r,a;return E().w(function(n){for(;;)switch(n.p=n.n){case 0:return n.p=0,d(!0),D("Loading real board data...","info"),n.n=1,C.api("query {\n        boards(ids: [".concat(e,"]) {\n          items {\n            id\n            name\n            column_values {\n              id\n              title\n              value\n              text\n            }\n          }\n        }\n      }"));case 1:if(t=n.v,console.log("Monday.com API response:",t),!t.error_code){n.n=2;break}throw new Error("Monday.com API Error: ".concat(t.error_message));case 2:t.data&&t.data.boards&&t.data.boards[0]?(r=t.data.boards[0].items,c(r),D("Loaded ".concat(r.length," real items from board ").concat(e),"success")):(D("No items found on this board","info"),c([])),n.n=4;break;case 3:n.p=3,a=n.v,console.error("Error loading board data:",a),D("Error loading board data: "+a.message,"error"),N();case 4:return n.p=4,d(!1),n.f(4);case 5:return n.a(2)}},n,null,[[0,3,4,5]])}));return function(e){return n.apply(this,arguments)}}(),N=function(){c([{id:"1",name:"Sample Storage Item 1",column_values:[{title:"Status",text:"Active"},{title:"CBM",text:"10.5"},{title:"Rate per CBM/Day",text:"2.50"},{title:"Date Received",text:"2024-01-15"},{title:"Bill Date",text:"2024-02-01"},{title:"Current Month Billing",text:"157.50"}]},{id:"2",name:"Sample Storage Item 2",column_values:[{title:"Status",text:"Scanned Out"},{title:"CBM",text:"5.2"},{title:"Rate per CBM/Day",text:"3.00"},{title:"Date Received",text:"2024-01-20"},{title:"Bill Date",text:"2024-02-01"},{title:"Current Month Billing",text:"93.60"}]},{id:"3",name:"Sample Storage Item 3",column_values:[{title:"Status",text:"Active"},{title:"CBM",text:"15.8"},{title:"Rate per CBM/Day",text:"2.75"},{title:"Date Received",text:"2024-01-25"},{title:"Bill Date",text:"2024-02-01"},{title:"Current Month Billing",text:"217.25"}]}])},D=function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info";f(n),h(e),setTimeout(function(){return f("")},5e3)},I=function(){var n=k(E().m(function n(){var e,t,r;return E().w(function(n){for(;;)switch(n.p=n.n){case 0:if(a){n.n=1;break}return D("No board selected","error"),n.a(2);case 1:return n.p=1,d(!0),n.n=2,fetch("/api/billing/calculate-current-month",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({boardId:a})});case 2:return e=n.v,n.n=3,e.json();case 3:t=n.v,e.ok?(D("Current month billing calculated successfully!","success"),j(a)):D("Error calculating billing: "+t.error,"error"),n.n=5;break;case 4:n.p=4,r=n.v,D("Error calculating billing: "+r.message,"error");case 5:return n.p=5,d(!1),n.f(5);case 6:return n.a(2)}},n,null,[[1,4,5,6]])}));return function(){return n.apply(this,arguments)}}(),A=function(){var n=k(E().m(function n(){var e,t,r;return E().w(function(n){for(;;)switch(n.p=n.n){case 0:if(a){n.n=1;break}return D("No board selected","error"),n.a(2);case 1:return n.p=1,d(!0),n.n=2,fetch("/api/invoices/generate-current-month",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({boardId:a})});case 2:return e=n.v,n.n=3,e.json();case 3:t=n.v,e.ok?D("Invoices generated successfully!","success"):D("Error generating invoices: "+t.error,"error"),n.n=5;break;case 4:n.p=4,r=n.v,D("Error generating invoices: "+r.message,"error");case 5:return n.p=5,d(!1),n.f(5);case 6:return n.a(2)}},n,null,[[1,4,5,6]])}));return function(){return n.apply(this,arguments)}}(),T=function(){var n=k(E().m(function n(){var e,t,r;return E().w(function(n){for(;;)switch(n.p=n.n){case 0:if(a){n.n=1;break}return D("No board selected","error"),n.a(2);case 1:return n.p=1,d(!0),n.n=2,fetch("/api/billing/update-bill-dates",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({boardId:a})});case 2:return e=n.v,n.n=3,e.json();case 3:t=n.v,e.ok?(D("Bill dates updated successfully!","success"),j(a)):D("Error updating bill dates: "+t.error,"error"),n.n=5;break;case 4:n.p=4,r=n.v,D("Error updating bill dates: "+r.message,"error");case 5:return n.p=5,d(!1),n.f(5);case 6:return n.a(2)}},n,null,[[1,4,5,6]])}));return function(){return n.apply(this,arguments)}}(),_=function(n,e){var t=n.column_values.find(function(n){return n.title===e});return t?t.text:""};return r.createElement("div",{className:"monday-board-view"},r.createElement("div",{className:"board-header"},r.createElement("h1",null,"üè¢ Storage Billing Dashboard"),r.createElement("p",null,"SDK Status: ",S),r.createElement("p",null,"Authentication: ",v?"‚úÖ Connected":"‚ùå Not Connected"),r.createElement("p",null,"Board ID: ",a||"Loading...")),p&&r.createElement("div",{className:"message ".concat(b)},p),r.createElement("div",{className:"action-buttons"},r.createElement("button",{className:"monday-button primary",onClick:I,disabled:u||!v},u?"Calculating...":"Calculate Current Month Billing"),r.createElement("button",{className:"monday-button primary",onClick:A,disabled:u||!v},u?"Generating...":"Generate Invoices"),r.createElement("button",{className:"monday-button secondary",onClick:T,disabled:u||!v},u?"Updating...":"Update Bill Dates")),r.createElement("div",{className:"board-stats"},r.createElement("div",{className:"stat-card"},r.createElement("h3",null,"Total Items"),r.createElement("p",null,l.length)),r.createElement("div",{className:"stat-card"},r.createElement("h3",null,"Active Items"),r.createElement("p",null,l.filter(function(n){return"Active"===_(n,"Status")}).length)),r.createElement("div",{className:"stat-card"},r.createElement("h3",null,"Scanned Out"),r.createElement("p",null,l.filter(function(n){return"Scanned Out"===_(n,"Status")}).length)),r.createElement("div",{className:"stat-card"},r.createElement("h3",null,"Total Monthly Billing"),r.createElement("p",null,"¬£",l.reduce(function(n,e){return n+(parseFloat(_(e,"Current Month Billing"))||0)},0).toFixed(2)))),r.createElement("div",{className:"items-list"},r.createElement("h2",null,"Storage Items ",!v&&"(Demo Data)"),u?r.createElement("div",{className:"loading"},"Loading items..."):l.length>0?r.createElement("div",{className:"items-grid"},l.map(function(n){return r.createElement("div",{key:n.id,className:"item-card"},r.createElement("h4",null,n.name),r.createElement("div",{className:"item-details"},r.createElement("p",null,r.createElement("strong",null,"Status:")," ",_(n,"Status")),r.createElement("p",null,r.createElement("strong",null,"CBM:")," ",_(n,"CBM")),r.createElement("p",null,r.createElement("strong",null,"Rate:")," ¬£",_(n,"Rate per CBM/Day"),"/day"),r.createElement("p",null,r.createElement("strong",null,"Date Received:")," ",_(n,"Date Received")),r.createElement("p",null,r.createElement("strong",null,"Bill Date:")," ",_(n,"Bill Date")),r.createElement("p",null,r.createElement("strong",null,"Current Month Billing:")," ¬£",_(n,"Current Month Billing"))))})):r.createElement("div",{className:"no-items"},r.createElement("p",null,"No items found on this board."),r.createElement("p",null,"Add storage items to get started with billing calculations."))))};t(8496),a.createRoot(document.getElementById("root")).render(r.createElement(r.StrictMode,null,r.createElement(B,null)))},8868:(n,e,t)=>{t.d(e,{A:()=>l});var r=t(1601),a=t.n(r),o=t(6314),i=t.n(o)()(a());i.push([n.id,"/* Monday.com Board View Styles */\n.monday-board-view {\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n  padding: 20px;\n  background: #f6f7fb;\n  min-height: 100vh;\n}\n\n.board-header {\n  background: white;\n  padding: 20px;\n  border-radius: 8px;\n  margin-bottom: 20px;\n  box-shadow: 0 1px 3px rgba(0,0,0,0.1);\n}\n\n.board-header h1 {\n  margin: 0 0 8px 0;\n  font-size: 24px;\n  font-weight: 600;\n  color: #323338;\n}\n\n.board-header p {\n  margin: 0;\n  color: #676879;\n  font-size: 14px;\n}\n\n.message {\n  padding: 12px 16px;\n  border-radius: 6px;\n  margin-bottom: 16px;\n  font-size: 14px;\n  font-weight: 500;\n  border-left: 4px solid;\n}\n\n.message.success {\n  background: #d4edda;\n  color: #155724;\n  border-left-color: #28a745;\n}\n\n.message.error {\n  background: #f8d7da;\n  color: #721c24;\n  border-left-color: #dc3545;\n}\n\n.message.info {\n  background: #d1ecf1;\n  color: #0c5460;\n  border-left-color: #17a2b8;\n}\n\n.action-buttons {\n  display: flex;\n  gap: 12px;\n  margin-bottom: 20px;\n  flex-wrap: wrap;\n}\n\n.monday-button {\n  padding: 8px 16px;\n  border-radius: 6px;\n  border: none;\n  font-size: 14px;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  min-height: 32px;\n}\n\n.monday-button.primary {\n  background: #0073ea;\n  color: white;\n}\n\n.monday-button.primary:hover:not(:disabled) {\n  background: #0056b3;\n  transform: translateY(-1px);\n  box-shadow: 0 2px 4px rgba(0,0,0,0.1);\n}\n\n.monday-button.secondary {\n  background: #f6f7fb;\n  color: #323338;\n  border: 1px solid #c3c6d4;\n}\n\n.monday-button.secondary:hover:not(:disabled) {\n  background: #e8eaef;\n  border-color: #a5abb3;\n}\n\n.monday-button:disabled {\n  background: #c3c6d4;\n  color: #676879;\n  cursor: not-allowed;\n  transform: none;\n  box-shadow: none;\n}\n\n.board-stats {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n  gap: 16px;\n  margin-bottom: 24px;\n}\n\n.stat-card {\n  background: white;\n  padding: 20px;\n  border-radius: 8px;\n  box-shadow: 0 1px 3px rgba(0,0,0,0.1);\n  text-align: center;\n}\n\n.stat-card h3 {\n  margin: 0 0 8px 0;\n  font-size: 14px;\n  font-weight: 500;\n  color: #676879;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n}\n\n.stat-card p {\n  margin: 0;\n  font-size: 32px;\n  font-weight: 600;\n  color: #0073ea;\n}\n\n.items-list {\n  background: white;\n  border-radius: 8px;\n  padding: 20px;\n  box-shadow: 0 1px 3px rgba(0,0,0,0.1);\n}\n\n.items-list h2 {\n  margin: 0 0 20px 0;\n  font-size: 18px;\n  font-weight: 600;\n  color: #323338;\n}\n\n.loading {\n  text-align: center;\n  padding: 40px;\n  color: #676879;\n  font-size: 14px;\n}\n\n.no-items {\n  text-align: center;\n  padding: 40px;\n  color: #676879;\n}\n\n.no-items p {\n  margin: 0 0 8px 0;\n  font-size: 14px;\n}\n\n.items-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));\n  gap: 16px;\n}\n\n.item-card {\n  border: 1px solid #e1e5e9;\n  border-radius: 6px;\n  padding: 16px;\n  background: #fafbfc;\n  transition: all 0.2s ease;\n}\n\n.item-card:hover {\n  border-color: #0073ea;\n  box-shadow: 0 2px 8px rgba(0,115,234,0.1);\n}\n\n.item-card h4 {\n  margin: 0 0 12px 0;\n  font-size: 16px;\n  font-weight: 600;\n  color: #323338;\n}\n\n.item-details p {\n  margin: 0 0 6px 0;\n  font-size: 13px;\n  color: #676879;\n  display: flex;\n  justify-content: space-between;\n}\n\n.item-details strong {\n  color: #323338;\n  font-weight: 500;\n}\n\n/* Responsive design */\n@media (max-width: 768px) {\n  .monday-board-view {\n    padding: 16px;\n  }\n  \n  .action-buttons {\n    flex-direction: column;\n  }\n  \n  .monday-button {\n    width: 100%;\n  }\n  \n  .board-stats {\n    grid-template-columns: 1fr;\n  }\n  \n  .items-grid {\n    grid-template-columns: 1fr;\n  }\n}\n\n/* Monday.com specific styles */\n.monday-board-view * {\n  box-sizing: border-box;\n}\n\n/* Focus states for accessibility */\n.monday-button:focus {\n  outline: none;\n  box-shadow: 0 0 0 2px rgba(0,115,234,0.2);\n}\n\n/* Animation for loading states */\n@keyframes pulse {\n  0% { opacity: 1; }\n  50% { opacity: 0.5; }\n  100% { opacity: 1; }\n}\n\n.loading {\n  animation: pulse 1.5s ease-in-out infinite;\n} ",""]);const l=i}},t={};function r(n){var a=t[n];if(void 0!==a)return a.exports;var o=t[n]={id:n,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.exports}r.m=e,n=[],r.O=(e,t,a,o)=>{if(!t){var i=1/0;for(u=0;u<n.length;u++){for(var[t,a,o]=n[u],l=!0,c=0;c<t.length;c++)(!1&o||i>=o)&&Object.keys(r.O).every(n=>r.O[n](t[c]))?t.splice(c--,1):(l=!1,o<i&&(i=o));if(l){n.splice(u--,1);var s=a();void 0!==s&&(e=s)}}return e}o=o||0;for(var u=n.length;u>0&&n[u-1][2]>o;u--)n[u]=n[u-1];n[u]=[t,a,o]},r.n=n=>{var e=n&&n.__esModule?()=>n.default:()=>n;return r.d(e,{a:e}),e},r.d=(n,e)=>{for(var t in e)r.o(e,t)&&!r.o(n,t)&&Object.defineProperty(n,t,{enumerable:!0,get:e[t]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(n){if("object"==typeof window)return window}}(),r.o=(n,e)=>Object.prototype.hasOwnProperty.call(n,e),r.j=703,(()=>{var n={703:0};r.O.j=e=>0===n[e];var e=(e,t)=>{var a,o,[i,l,c]=t,s=0;if(i.some(e=>0!==n[e])){for(a in l)r.o(l,a)&&(r.m[a]=l[a]);if(c)var u=c(r)}for(e&&e(t);s<i.length;s++)o=i[s],r.o(n,o)&&n[o]&&n[o][0](),n[o]=0;return r.O(u)},t=self.webpackChunkstorage_billing_monday_app=self.webpackChunkstorage_billing_monday_app||[];t.forEach(e.bind(null,0)),t.push=e.bind(null,t.push.bind(t))})(),r.nc=void 0;var a=r.O(void 0,[267,96],()=>r(3827));a=r.O(a)})();